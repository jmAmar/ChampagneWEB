"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1174],{17624:function(e,t,n){n.d(t,{D:function(){return s},s:function(){return v}});var r=n(64467),i=(n(26099),n(16034),n(96540)),a=n(44022),o=n(82439),c=n(20875),u=n(61688),l=n(75258),s=(0,i.createContext)({}),d={},v=function(e){var t=e.children,n=e.data,v=e.atiData,f=(0,i.useContext)(a.b),p=f.pageType,m=(0,i.useContext)(l.h),g=m.atiAnalyticsProducerId,b=m.atiAnalyticsProducerName,y=(0,o.A)("eventTracking").enabled,A=(0,i.useMemo)((function(){if(y||n&&v){var e=function(e){var t,n=(t={},(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)(t,c.R,"article"),c.KM,"article-sfv"),c.Uw,"index-home"),c.X2,"list-datadriven-read"),c.Ip,"index-section-fix"),c.KN,"article-media-asset"),c.YR,"article-sty"),c.MX,"article-photo-gallery"),c.vw,"article-csp"),c.Sp,"topic-page"),(0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)(t,c.ZD,"live-page"),c.Ko,"index-home"),c.M$,""),c.zA,"static-page"),c.G_,""),c.lU,"av-embeds"),c.WK,"downloads"),c.rs,"player-live"),c.XN,"player-episode"),c.pJ,"player-episode"))[e];return n||console.warn("ATI Event Tracking Error: Could not get the page type's campaign name"),n}(p),t=(0,u.uo)({requestContext:f,serviceContext:m,data:n,atiData:v}),i=t.pageIdentifier,a=t.platform,o=t.statsDestination;return{campaignID:e,pageIdentifier:i,platform:a,producerId:g,producerName:b,statsDestination:o}}return null}),[g,b,v,n,y,p,f,m]);if(!y||!n&&!v)return i.createElement(s.Provider,{value:d},t);var O=Object.values(A).every(Boolean);return i.createElement(s.Provider,{value:O?A:d},t)}},44022:function(e,t,n){n.d(t,{b:function(){return p},I:function(){return m}});n(69085);var r=n(96540),i=function(e){var t=e.isUK,n=void 0===t||t,r=e.env,i=void 0===r?"test":r,a="";switch(e.service){case"news":a=!1!==n?"NEWS_PS":"NEWS_GNL";break;case"cymrufyw":case"naidheachdan":a=!1!==n?"NEWS_LANGUAGES_PS":"NEWS_LANGUAGES_GNL";break;case"japanese":a="NEWS_LANGUAGES_GNL";break;case"scotland":a="PS_HOMEPAGE";break;case"archive":a="BBC_ARCHIVE_PS";break;case"newsround":a="NEWSROUND";break;case"sport":a=!1!==n?"SPORT_PS":"SPORT_GNL";break;case"ws":a="DEFAULT";break;default:a="WS_NEWS_LANGUAGES"}return"live"===i?a:"".concat(a,"_TEST")},a=(n(28706),n(20875)),o=function(e){var t=e.pageType,n=e.service,r=e.id;return t===a.R?"".concat(n,".articles.").concat(r,".page"):t===a.Uw?"".concat(n,".page"):null},c=n(37667),u=n(65606),l=function(e){var t="https://www.bbc.co.uk";return e?t=e:u&&"local"===(0,c.U)().SIMORGH_APP_ENV?t=(0,c.U)().SIMORGH_BASE_URL:"undefined"!=typeof window&&window.location&&window.location.origin&&(t=window.location.origin),{origin:t}},s=(n(74423),n(21699),function(e){return e.includes("local")?"local":e.includes("test")||e.includes("stage")?"test":"live"}),d=(n(27495),n(25440),n(71390)),v=function(e){return"".concat(e,".amp")},f=function(e,t){var n=function(e,t){return"".concat(e).concat(t).replace(d.AMP_REGEX,"").replace(d.LITE_REGEX,"")}(e,t),r=n.replace(d.TLD_REGEX,".co.uk"),i=function(e){return e.replace(d.TLD_REGEX,".com")}(n);return{canonicalLink:n,ampLink:v(n),canonicalUkLink:r,ampUkLink:v(r),canonicalNonUkLink:i,ampNonUkLink:v(i)}},p=r.createContext({}),m=function(e){var t=e.bbcOrigin,n=void 0===t?null:t,a=e.derivedPageType,c=void 0===a?null:a,u=e.children,d=e.id,v=void 0===d?null:d,m=e.isAmp,g=void 0!==m&&m,b=e.isApp,y=void 0!==b&&b,A=e.isLite,O=void 0!==A&&A,h=e.isNextJs,w=void 0!==h&&h,E=e.mvtExperiments,P=void 0===E?null:E,k=e.pageType,D=e.pathname,_=e.previousPath,S=void 0===_?null:_,I=e.service,j=e.showAdsBasedOnLocation,N=void 0!==j&&j,x=e.showCookieBannerBasedOnCountry,L=void 0===x||x,C=e.statusCode,K=void 0===C?null:C,T=e.timeOnServer,G=void 0===T?null:T,U=e.variant,R=void 0===U?null:U,B=e.isUK,M=void 0===B?null:B,W=l(n).origin,X=s(W),H=null!=M&&M,V=function(){switch(!0){case y:return"app";case g:return"amp";case O:return"lite";default:return"canonical"}}(),z=i({isUK:"amp"===V||H,env:X,service:I}),J=o({pageType:k,service:I,id:v}),Y=(0,r.useMemo)((function(){return Object.assign(Object.assign({env:X,id:v,isUK:H,origin:W,pageType:k,derivedPageType:c,isAmp:g,isApp:y,isLite:O,isNextJs:w,platform:V,statsDestination:z,statsPageIdentifier:J,statusCode:K,previousPath:S,variant:R,timeOnServer:G,showAdsBasedOnLocation:N,showCookieBannerBasedOnCountry:L,service:I,pathname:D},f(W,D)),{mvtExperiments:P})}),[c,X,H,v,g,y,O,w,P,W,k,D,V,S,I,N,L,z,J,K,G,R]);return r.createElement(p.Provider,{value:Y},u)}},75258:function(e,t,n){n.d(t,{h:function(){return c},y:function(){return u}});var r=n(96540),i=n(72702),a=n(31),o=n(81292),c=(0,r.createContext)({}),u=function(e){var t=e.children,n=e.service,u=e.variant,l=e.pageLang,s=i.A[n];return s?r.createElement(s,{Context:c,dataKey:(0,o.A)({service:n,pageLang:l})||(0,a.IX)({service:n,variant:u})},t):null}},53665:function(e,t,n){n.d(t,{Gg:function(){return v},$z:function(){return f}});var r=n(5544),i=n(96540),a=n(11197),o=n(37667),c=(n(69085),n(10851)),u=n.n(c),l=function(e){var t=e.data;return u()(!1,["toggles","ads","enabled"],t)},s=function(e,t){var n=t.type,r=t.data;return"UPDATE_TOGGLE_STATE"===n?Object.assign(Object.assign(Object.assign({},e),r.toggles),{ads:{enabled:l({data:r})}}):e},d=(0,o.U)().SIMORGH_APP_ENV||"local",v=(0,i.createContext)({}),f=function(e){var t=e.children,n=e.toggles,o=void 0===n?a.A[d]:n,c=(0,i.useReducer)(s,o),u=(0,r.A)(c,2),l=u[0],f=u[1],p=(0,i.useMemo)((function(){return{toggleState:l,toggleDispatch:f}}),[l,f]);return i.createElement(v.Provider,{value:p},t)};v.Consumer},52183:function(e,t,n){n.d(t,{R:function(){return g},a:function(){return b}});var r=n(5544),i=n(96540),a=n(68414),o=n(18987),c=n(4178),u=n(16389),l=n(62242),s=function(){return o.A.get("ckns_policy")||"000"},d=function(e){return!(!e||3!==e.length||"1"!==e[2])},v=n(82439),f=n(78787),p=n(44022),m=function(e){var t=e.config,n=void 0===t?null:t,r=(0,v.A)("chartbeatAnalytics").enabled,a=(0,i.useContext)(p.b).isAmp;return r&&n&&!a?i.createElement(f.A,{chartbeatConfig:n}):null},g=i.createContext({}),b=function(e){var t=e.children,n=(0,i.useState)(s()),v=(0,r.A)(n,2),f=v[0],p=v[1],b=(0,i.useState)(null),y=(0,r.A)(b,2),A=y[0],O=y[1];(0,c.A)()&&!(0,u.A)()&&function(){var e="ckns_mvt";if(!o.A.get(e)){var t=(0,a.v4)();(0,l.A)({name:e,value:t})}}();var h=(0,i.useMemo)((function(){return{cookiePolicy:f,sendCanonicalChartbeatBeacon:O,updateCookiePolicy:function(){return p(s())},personalisationEnabled:d(f)}}),[f]);return i.createElement(g.Provider,{value:h},i.createElement(m,{config:A}),t)}},95673:function(e,t,n){n(96540);var r=n(17437);t.A=function(e){return function(t){var n=t.Context,i=t.dataKey,a=void 0===i?null:i,o=t.children;return(0,r.Y)(n.Provider,{value:a?e[a]:e},o)}}},37182:function(e,t,n){n.d(t,{A:function(){return D}});var r=n(64467),i=n(10467),a=n(5544),o=n(54756),c=n.n(o),u=(n(52675),n(2008),n(83851),n(81278),n(79432),n(26099),n(23500),n(96540)),l=n(17624),s=n(64074),d=n(37884),v=n(8073),f=n(75258),p=n(66749),m=n.n(p),g=n(65044),b=n.n(g),y=function(e){return 0===e},A=function(e){return 1===e||4===e},O=function(e){return A(e.button)||function(e){return y(e.button)&&e.shiftKey&&!(e.metaKey||e.altKey||e.ctrlKey)}(e)},h=function(e,t){return t&&!e.shiftKey&&!e.altKey||e.shiftKey&&t&&!e.altKey||e.shiftKey&&t&&e.altKey||e.shiftKey&&e.altKey&&!t||e.altKey&&t&&!e.shiftKey},w=function(e){return(m()(b()("Mac"),["navigator","platform"],window)?function(e){return y(e.button)&&h(e,e.metaKey)}(e):function(e){return y(e.button)&&h(e,e.ctrlKey)}(e))||O(e)},E=function(e){return A(e.button)||function(e){return y(e.button)&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||w(e)};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null==e?void 0:e.preventNavigation,n=null==e?void 0:e.componentName,o=null==e?void 0:e.url,p=null==e?void 0:e.advertiserID,m=null==e?void 0:e.format,g=null==e?void 0:e.optimizely,b=null==e?void 0:e.optimizelyMetricNameOverride,y=null==e?void 0:e.detailedPlacement,A=(0,s.A)(n).trackingIsEnabled,O=(0,u.useState)(!1),h=(0,a.A)(O,2),w=h[0],P=h[1],D=(0,u.useContext)(l.D),_=D.pageIdentifier,S=D.platform,I=D.producerId,j=D.producerName,N=D.statsDestination,x=(null==e?void 0:e.campaignID)||(null==D?void 0:D.campaignID),L=(0,u.useContext)(f.h),C=L.service,K=L.useReverb;return(0,u.useCallback)(function(){var e=(0,i.A)(c().mark((function e(i){var a,u,l,s,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![A,!w,E(i)].every(Boolean)){e.next=16;break}if(P(!0),![x,n,_,S,I,j,C,N].every(Boolean)){e.next=16;break}return u=null==i||null===(a=i.currentTarget)||void 0===a?void 0:a.href,i.stopPropagation(),i.preventDefault(),g&&(l=d.A.viewClickAttributeId,s=k(k({},g.user.attributes),{},(0,r.A)({},"clicked_".concat(l),!0)),g.track(b?"".concat(b,"_clicks"):"component_clicks",g.user.id,s)),f=(null==g?void 0:g.getVariation(d.A.ruleKey))||null,e.prev=10,e.next=13,(0,v.T)(k({type:"click",campaignID:x,componentName:n,format:m,pageIdentifier:_,platform:S,producerId:I,producerName:j,service:C,advertiserID:p,statsDestination:N,url:o,detailedPlacement:y,useReverb:K},f&&"off"!==f&&{experimentVariant:f}));case 13:return e.prev=13,u&&!t&&(g&&g.close(),window.location.assign(u)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[10,,13,16]])})));return function(t){return e.apply(this,arguments)}}(),[A,w,x,n,_,S,t,I,j,C,N,o,p,m,g,b,y,K])}},761:function(e,t,n){var r=n(96540);t.A=function(e,t){(0,r.useEffect)((function(){var n=window.matchMedia(e);return t(n),n.addEventListener?n.addEventListener("change",t):n.addListener(t),function(){n.removeEventListener?n.removeEventListener("change",t):n.removeListener(t)}}),[e,t])}},9972:function(e,t,n){var r=n(5544),i=n(96540);t.A=function(){var e=(0,i.useState)(!1),t=(0,r.A)(e,2),n=t[0],a=t[1];return(0,i.useEffect)((function(){"undefined"!=typeof window&&window.operamini&&a(!0)}),[]),n}},82439:function(e,t,n){n(52675),n(2008),n(83851),n(81278),n(79432),n(26099),n(23500);var r=n(64467),i=n(96540),a=n(53665);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.A=function(e){var t=(0,i.useContext)(a.Gg).toggleState[e],n=t||{},c=n.enabled,u=void 0===c?null:c,l=n.value;return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{enabled:u,value:l}):{enabled:null}}},64074:function(e,t,n){n(74423),n(21699),n(42762);var r=n(82439);t.A=function(e){var t=(0,r.A)("eventTracking"),n=t.enabled,i=t.value,a=("string"==typeof i?i.trim().split(","):[]).includes(e);return{trackingIsEnabled:!0===n&&!a}}},78282:function(e,t,n){var r=n(64467),i=n(10467),a=n(5544),o=n(54756),c=n.n(o),u=(n(52675),n(2008),n(23792),n(83851),n(81278),n(79432),n(26099),n(3362),n(47764),n(23500),n(62953),n(96540)),l=n(45932),s=n.n(l),d=n(8073),v=n(17624),f=n(64074),p=n(37884),m=n(75258);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null==e?void 0:e.componentName,o=null==e?void 0:e.format,l=null==e?void 0:e.advertiserID,g=null==e?void 0:e.url,y=null==e?void 0:e.optimizely,A=null==e?void 0:e.optimizelyMetricNameOverride,O=null==e?void 0:e.detailedPlacement,h=(0,u.useRef)(),w=(0,u.useRef)(null),E=(0,u.useState)(),P=(0,a.A)(E,2),k=P[0],D=P[1],_=(0,u.useState)(!1),S=(0,a.A)(_,2),I=S[0],j=S[1],N=(0,f.A)(t).trackingIsEnabled,x=(0,u.useContext)(v.D),L=x.pageIdentifier,C=x.platform,K=x.producerId,T=x.producerName,G=x.statsDestination,U=(null==e?void 0:e.campaignID)||(null==x?void 0:x.campaignID),R=(0,u.useContext)(m.h),B=R.service,M=R.useReverb,W=function(){var e=(0,i.A)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.IntersectionObserver){e.next=3;break}return e.next=3,n.e(5127).then(n.t.bind(n,95127,23));case 3:t=function(e){var t=e.some(s()("isIntersecting"));D(t)},r={threshold:[.5]},h.current=new IntersectionObserver(t,r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return k&&!w.current?w.current=setTimeout((function(){if([[U,t,L,C,K,T,B,G].every(Boolean),N,!I].every(Boolean)){if(y){var e=p.A.viewClickAttributeId,n=b(b({},y.user.attributes),{},(0,r.A)({},"viewed_".concat(e),!0));y.track(A?"".concat(A,"_views"):"component_views",y.user.id,n)}var i=(null==y?void 0:y.getVariation(p.A.ruleKey))||null;(0,d.T)(b({campaignID:U,componentName:t,format:o,pageIdentifier:L,platform:C,producerId:K,producerName:T,service:B,statsDestination:G,type:"view",advertiserID:l,url:g,detailedPlacement:O,useReverb:M},i&&"off"!==i&&{experimentVariant:i})),j(!0),h.current.disconnect(),h.current=null,w.current=null}}),1e3):(clearTimeout(w.current),w.current=null),function(){clearTimeout(w.current)}}),[U,t,o,k,L,C,K,T,B,G,N,I,l,g,y,A,O,M]),function(){var e=(0,i.A)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&N&&!I){e.next=2;break}return e.abrupt("return");case 2:if(h.current){e.next=5;break}return e.next=5,W();case 5:h.current.observe(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=legacy.commons-e019dbda.b1af8808.js.map